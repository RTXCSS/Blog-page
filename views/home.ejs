<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('./partials/head') %>
  <title>Homepage</title>
</head>
<body>
  <%- include('./partials/navbar') %>

  <div class="container mt-3">
    <% if (user) { %>
      <% if (blogs && blogs.length > 0) { %>
        <div class="row">
          <% blogs.forEach(blog => { %>
            <div class="col-md-4 col-sm-6 mb-4 d-flex">
              <div class="card h-100 w-100 shadow-sm">
                <div class="p-2 d-flex align-items-center">
                  <img src="<%= blog.createdBy?.pfp || '/images/pfp.jpg' %>" 
                       class="rounded-circle me-2" 
                       width="40" height="40"
                       alt="<%= blog.createdBy?.fullName || 'Author' %>">
                  <small class="text-muted">
                    <%= blog.createdBy?.fullName || 'Unknown Author' %>
                  </small>
                </div>
                <% if (blog.coverimage) { %>
                  <img src="<%= blog.coverimage %>" 
                       class="card-img-top" 
                       alt="<%= blog.title %>">
                <% } %>

                <div class="card-body d-flex flex-column">
                  <h5 class="card-title"><%= blog.title %></h5>
                  <a href="/blog/<%= blog._id %>" class="btn btn-primary mt-auto">View</a>
                </div>
              </div>
            </div>
          <% }) %>
        </div>
      <% } else { %>
        <p>No blogs available yet.</p>
      <% } %>
    <% } else { %>
      <div class="alert alert-info">
        Please <a href="/user/signin">sign in</a> to view blogs.
      </div>
    <% } %>
  </div>

  <%- include('./partials/script') %>
</body>
</html>
